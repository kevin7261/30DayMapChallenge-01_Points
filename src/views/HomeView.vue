<script>
  /**
   * ðŸ  HomeView.vue - ä¸»é é¢çµ„ä»¶ (Main Page Component)
   *
   * é€™æ˜¯æ‡‰ç”¨ç¨‹å¼çš„ä¸»é é¢çµ„ä»¶ï¼Œè² è²¬æ•´åˆåœ°åœ–é¡¯ç¤ºåŠŸèƒ½å’Œç”¨æˆ¶äº’å‹•ã€‚
   * ä½œç‚ºæ‡‰ç”¨ç¨‹å¼çš„æ ¸å¿ƒé é¢ï¼Œæœ¬çµ„ä»¶å”èª¿åœ°åœ–çµ„ä»¶ã€ç‹€æ…‹ç®¡ç†å’Œç”¨æˆ¶æ“ä½œï¼Œ
   * æä¾›å®Œæ•´çš„åœ°åœ–ç€è¦½å’Œå°Žèˆªé«”é©—ã€‚
   *
   * ðŸŽ¯ æ ¸å¿ƒåŠŸèƒ½ï¼š
   * - ðŸ—ºï¸ åœ°åœ–é¡¯ç¤ºï¼šæ•´åˆ MapTab çµ„ä»¶å±•ç¤ºä¸–ç•Œåœ°åœ–
   * - ðŸŽ›ï¸ ç‹€æ…‹ç®¡ç†ï¼šå”èª¿ dataStore å’Œ defineStore çš„ç‹€æ…‹
   * - ðŸŒ åœ‹å®¶å°Žèˆªï¼šæä¾›åœ‹å®¶é–“çš„å¿«é€Ÿå°ŽèˆªåŠŸèƒ½
   * - ðŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆï¼šé©é…å„ç¨®è¨­å‚™çš„èž¢å¹•å°ºå¯¸
   * - ðŸ”„ æ•¸æ“šåŒæ­¥ï¼šç¢ºä¿åœ°åœ–å¯¦ä¾‹èˆ‡ç‹€æ…‹ç®¡ç†çš„åŒæ­¥
   *
   * ðŸ—ï¸ çµ„ä»¶æž¶æ§‹ï¼š
   * - å®¹å™¨å±¤ï¼šæä¾›é é¢çš„æ•´é«”ä½ˆå±€çµæ§‹
   * - åœ°åœ–å±¤ï¼šæ•´åˆ MapTab çµ„ä»¶é€²è¡Œåœ°åœ–æ¸²æŸ“
   * - æŽ§åˆ¶å±¤ï¼šè™•ç†ç”¨æˆ¶äº’å‹•å’Œç‹€æ…‹ç®¡ç†
   * - æ•¸æ“šå±¤ï¼šå”èª¿ Pinia ç‹€æ…‹ç®¡ç†
   *
   * ðŸ”§ æŠ€è¡“æ•´åˆï¼š
   * - Vue 3 Composition APIï¼šç¾ä»£åŒ–çš„çµ„ä»¶é–‹ç™¼æ¨¡å¼
   * - Pinia ç‹€æ…‹ç®¡ç†ï¼šéŸ¿æ‡‰å¼æ•¸æ“šç®¡ç†å’Œç‹€æ…‹åŒæ­¥
   * - çµ„ä»¶é€šä¿¡ï¼šçˆ¶å­çµ„ä»¶é–“çš„äº‹ä»¶å‚³éžå’Œæ•¸æ“šå…±äº«
   * - ç”Ÿå‘½é€±æœŸç®¡ç†ï¼šçµ„ä»¶æŽ›è¼‰å’Œå¸è¼‰çš„ç‹€æ…‹ç®¡ç†
   *
   * ðŸ“Š æ•¸æ“šæµï¼š
   * 1. ç”¨æˆ¶æ“ä½œ â†’ çµ„ä»¶æ–¹æ³•
   * 2. çµ„ä»¶æ–¹æ³• â†’ Pinia Store
   * 3. Store ç‹€æ…‹è®Šæ›´ â†’ éŸ¿æ‡‰å¼æ›´æ–°
   * 4. åœ°åœ–çµ„ä»¶æŽ¥æ”¶æ›´æ–° â†’ é‡æ–°æ¸²æŸ“
   *
   * ðŸŽ¨ è¨­è¨ˆç‰¹è‰²ï¼š
   * - æ»¿ç‰ˆä½ˆå±€ï¼š100vh é«˜åº¦ï¼Œç„¡é‚Šè·è¨­è¨ˆ
   * - éŸ¿æ‡‰å¼é©é…ï¼šè‡ªå‹•é©æ‡‰ä¸åŒèž¢å¹•å°ºå¯¸
   * - ç›´è§€æ“ä½œï¼šç°¡æ½”çš„ç”¨æˆ¶ç•Œé¢å’Œæ“ä½œæµç¨‹
   * - è¦–è¦ºä¸€è‡´æ€§ï¼šçµ±ä¸€çš„è¨­è¨ˆèªžè¨€å’Œè¦–è¦ºé¢¨æ ¼
   *
   * @author 30 Day Map Challenge Team
   * @version 1.0.0
   * @since 2024
   */

  import MapTab from '../tabs/MapTab.vue';
  import { useDataStore } from '@/stores/dataStore.js';
  import { useDefineStore } from '@/stores/defineStore.js';
  import { computed } from 'vue';

  export default {
    name: 'HomeView',
    components: { MapTab },
    setup() {
      // ðŸ“¦ å­˜å„²å¯¦ä¾‹
      const dataStore = useDataStore();
      const defineStore = useDefineStore();

      /**
       * ðŸ—ºï¸ è¨­å®šåœ°åœ–å¯¦ä¾‹
       * å°‡ Leaflet åœ°åœ–å¯¦ä¾‹å‚³éžçµ¦ dataStore
       * @param {Object} map - Leaflet åœ°åœ–å¯¦ä¾‹
       */
      const setMapInstance = (map) => dataStore.setMapInstance(map);

      /**
       * ðŸŒ å°Žèˆªåˆ°æŒ‡å®šåœ‹å®¶
       * @param {string} countryId - åœ‹å®¶ ID
       */
      const navigateToCountry = (countryId) => {
        dataStore.navigateToCountry(countryId);
      };

      // ðŸ“Š è¨ˆç®—å±¬æ€§ï¼šç²å–æ‰€æœ‰åœ‹å®¶åœ–å±¤
      const countries = computed(() => dataStore.getAllLayers());

      return {
        setMapInstance,
        defineStore,
        navigateToCountry,
        countries,
      };
    },
  };
</script>

<template>
  <!-- ðŸ  ä¸»æ‡‰ç”¨ç¨‹å¼å®¹å™¨ -->
  <div id="app" class="d-flex flex-column vh-100">
    <!-- ðŸ—ºï¸ åœ°åœ–å€åŸŸå®¹å™¨ -->
    <div class="flex-grow-1 overflow-hidden position-relative">
      <!-- ðŸ—ºï¸ åœ°åœ–çµ„ä»¶ -->
      <MapTab @map-ready="setMapInstance" />
    </div>
  </div>
</template>

<style>
  @import '../assets/css/common.css';
</style>
